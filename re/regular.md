# 正则表达式

信息技术日新月异，有些已成昨日黄花，然而伟大的东西却弥久如新，正则表达式(Regular Expression)就是这样一种伟大的发明。它是一个强大、便捷、高效的文本处理工具，能成百倍地提高开发效率和程序质量。正则表达式绝对值得每一个程序员掌握，甚至值得所有知识工作者了解。

然而奇怪的是，这样一个了不起的技术，在我国却没有得到充分推广。究其原因，主要有二：其一，正则表达式产生和发展与 UNIX 文化体系中，而我国的信息技术教学长期受到微软文化的影响。其二，正则表达式并不是那么容易掌握，需要正确的方法。
学习正则表达式，入门不难，看一些例子，试着模仿，就可粗通。但要真正掌握， 还需了解正则表达式的原理，强烈建议阅读 Jeffrey Firedl 的《精通正则表达式》。这本书 自1997年出版后，凭借其质量，成为正则表达式图书领域当之无愧的“圣经”。

## 正则表达式发展简史

关于正则表达式，最初的想法来自 20 世纪 40 年代的两位神经学家，他们研究 出一种模型，描述神经系统在神经元层面上的工作模式。若干年后，数学家 Stephen Kleene 在代数学中正式描述了这种模型，并将它命名为正则集合。Stephen 发明了一 套简洁的表明正则集合的方法，他称之为“正则表达式”。

20 世纪 50 年代和 60 年代，理论数学界对正则表达式进行了充分的研究。
20 世纪 70 年代，开始将正则表达式应用到计算方面，再到后来正则表达式开始 应用到其它领域(文本编辑、生物信息、基因图谱等等)。

在 UNIX 中 ed 编辑器开始使用正则表达式，其中的一个功能最终发展成独立的 工具 grep(Global Regular Expression Print)。这个工具在众多程序员的改进下，功能日渐强大。
1986 年，Henry Spencer 发布了用 C 语言写的正则表达式包，这是一个具有开创性意义的包，因为它可以毫无困难地移植到其他程序中。

1987 年，Larry Well 发布了 Perl 语言的第一个版本，提供了正则表达式操作符， 在脚本语言中是首创。之后，Perl 语言越来越强壮，错误也越来越少，添加了许多新的正则表达式特性。

其他语言的开发人员借鉴了 Perl 语言的正则表达式特性，最终在某种程度上“兼容 Perl”，如 Python、Ruby、Java、PHP、C/C++、.NET 都有各自的正则表达式包。 1997 年，Philip Hazel 开发了 PCRE，这是一套兼容 Perl 正则表达式的库，PCRE 的正则引擎质量很高，全面仿制 Perl 的正则表达式语法和语义。

## Python中使用正则表达式的流程

正则表达式的大致匹配过程是：依次拿出表达式和文本中的字符比较，如果每一个字符都能匹配，则匹配成功；一旦有匹配不成功的字符则匹配失败。如果表达式中有量词或边界，这个过程会稍微有一些不同，但也大致相同。

![PNG](\images\pyreflow.png)

## 正则表达式的构成要素

正则表达式由四部分组成:定界符、原子、元字符、模式修饰符。

### 定界符

定界符可以是任意非字母数字、非反斜线、非空白字符，常用“/”。

放在定界符中的最小的一个匹配单位，在一个正则表达式中，至少要有一个原子。正则表达式是一个从左到右匹配目标字符串的模式。

正则表达式的威力源于它可以在模式中拥有选择和重复的能力。一些字符被赋予特殊的涵义，使其不再单纯的代表自己，模式中的这种有特殊涵义的编码字符称为元字符。元字符用来修饰原子。

模式修饰符用来修正正则表达式进行，放在最右边。

### 原子

正则表达式中的原子可以是打印字符(键盘上的各种字母, 有的需要转义)、非打
印字符(如回车、制表符等)、转义符、子表达式(方括弧、圆括弧)。我们在理解正则表达式的时候，应该按照原子的顺序来解读。其他的子表达式(虽然是多个字符构成，但在逻辑上是一个原子)，将在后续的内容进行详细讲解。

### 元字符

模式中有特殊涵义的编码字符称为元字符。元字符被赋予特殊的涵义，使其不再
单纯的代表自己。如:
\d 表示数字，并不表示字母d。

![PNG](\images\pyre.png)

### 分组

竖线字符用于分离模式中的可选路径。比如模式 com|cn 匹配“com”或者“cn”。竖 线可以在模式中出现任意多个，并且允许有空的可选路径 (匹配空字符串)。匹配的处 理从左到右尝试每一个可选路径，并且使用第一个成功匹配的。

括号中匹配的内容，可以保存到变量中，命名的规则为``(?<name>)``

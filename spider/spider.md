# 网络爬虫

网络爬虫就是能够按照一定规则，自动收集网络中的数据的程序。

## 网络爬虫原理

1. 请求网页，获取网页源代码
2. 提取信息
3. 存储数据
4. 自动化程序

网页本质上是一个存储在指定位置的文本文件（不一定是静态的，可能是由远程计算机根据一定条件计算出来的），因此，网络爬虫的任务，就是获取远程文本文件，然后，对文件进行分析，提取出我们想要的数据。

## HTTP请求原理

HTTP遵循请求(Request)/应答(Response)模型。

Web浏览器向Web服务器发送请求，Web服务器处理请求并返回适当的应答。所有HTTP连接都被构造成一套请求和应答。

![PNG](\images\http.png)

浏览器作为一个客户端，向服务器端发送了一次浏览该地址所对应的网页的请求

服务器同意了客户端的请求

客户端把服务器端的文件下载到本地

浏览器对文件进行解释、展现

### URL

统一资源定位符(Uniform Resource Locator) 是互联网上标准资源的地址。互联网上的每个文件都有一个唯一的URL。
基本URL包含模式（或称协议）、服务器名称（或IP地址）、路径和文件名，

如：协议://授权/路径?查询
```
http://alumni.xjtu.edu.cn:9090/donation/namelist?pageNo=1&pageSize=10&billnum=&donateUserName=&orderWay=&donationid=0
```

爬虫最主要的处理对象就是URL，它根据URL地址取得所需要的文件内容，然后对它进行进一步的处理。

### 请求方式

#### GET

GET方法是默认的HTTP请求方法，我们日常用GET方法来提交表单数据，然而用GET方法提交的表单数据只经过了简单的编码，同时它将作为URL的一部分向Web服务器发送。

#### POST

POST方法是GET方法的一个替代方法，它主要是向Web服务器提交表单数据，尤其是大批量的数据。POST方法克服了GET方法的一些缺点。通过POST方法提交表单数据时，数据不是作为URL请求的一部分而是作为标准数据传送给Web服务器，这就克服了GET方法中的信息无法保密和数据量太小的缺点。

### requests包

Requests 是 Python 中的 HTTP 库，Requests库允许你发送符合标准的 HTTP/1.1 请求，无需手工劳动。你不需要手动为 URL 添加查询字串，也不需要对 POST 数据进行表单编码。Keep-alive 和 HTTP 连接池的功能是 100% 自动化的。

官方网站：[http://cn.python-requests.org/zh_CN/latest/](http://cn.python-requests.org/zh_CN/latest/)

安装方式：

```shell
pip install requests
```

## 编码

### 编码方式

1. ASCII编码：是对英语字符和二进制之间的关系做的统一规定
1. GBK编码：是汉字编码标准之一，是在 GB2312-80 标准基础上的内码扩展规范，使用了双字节编码
1. GB2312编码：适用于汉字处理、汉字通信等系统之间的信息交换
1. GB18030编码：国家标准GB18030-2005《信息技术 中文编码字符集》是我国继GB2312-1980和GB13000.1-1993之后最重要的汉字编码标准，是我国计算机系统必须遵循的基础性标准之一。 GB18030有两个版本：GB18030-2000和GB18030-2005。GB18030-2000是GBK的取代版本，它的主要特点是在GBK基础上增加了CJK统一汉字扩充A的汉字。GB18030-2005的主要特点是在GB18030-2000基础上增加了CJK统一汉字扩充B的汉字。
1. UTF-8编码：是 Unicode Transformation Format - 8 bit 的缩写。它是可变长的编码方式，可以使用1~4个字节表示一个字符，可根据不同的符号而变化字节长度
1. Unicode编码：这是一种世界上所有字符的编码。当然了它没有规定的存储方式

### 编码转换

通常是要以Unicode作为中间编码进行转换，即先将其他编码的字符串解码（decode）成 Unicode，再从 Unicode编码（encode）成另一种编码。

## 存储

存储的时候，可以将字符串编码之后，再存储到文件。

### 存储到文件

使用open函数，可以创建文件，并将内容写入到文件中。

``` python
f = open('xjtu.html', 'w')
f.write(content.encode('utf-8'))
f.close()
```
